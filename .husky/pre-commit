# Run lint-staged
npx lint-staged

# Additional checks for persistence files
if git diff --cached --name-only | grep -q "src/lib/persistence/"; then
  echo "üìÅ Persistence files changed, running additional checks..."

  # Type check persistence files
  npm run type-check

  # Ensure no console.logs in persistence code
  if git diff --cached --name-only | grep "src/lib/persistence/" | xargs grep -n "console.log" 2>/dev/null; then
    echo "‚ùå Error: console.log found in persistence files"
    echo "   Remove console.log statements before committing"
    exit 1
  fi

  echo "‚úÖ Persistence checks passed"
fi
